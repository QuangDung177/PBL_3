
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/AdminLayoutPage1.cshtml";
}
<style>
    .row_element-button {
        display: flex;
        flex-wrap: wrap;
        border-bottom: 1px solid #ddd;
        padding-bottom: 10px;
        margin-bottom: 10px;
        text-align: left;
        text-size-adjust: 100%;
        justify-content: space-between;
    }

    .btn {
        background-color: transparent;
        border: none;
        margin: 0;
        box-sizing: border-box;
    }

        .btn + .btn {
            margin-left: 20px;
        }

        .btn:hover {
            opacity: 0.8;
            background-color: bisque;
        }

    .btn-add {
        background-color: rgb(157, 249, 157);
    }

    .btn-delete {
        background-color: rgb(208, 208, 208);
    }

    .table-td-center {
        display: flex;
    }

    .datatable_filter {
        display: block;
    }

        .datatable_filter label {
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
            --font-family-sarabun: 'Roboto', sans-serif;
            --btn-fun: #4bac4d;
            font-family: var(--font-family-sarabun);
            font-size: 14px;
            line-height: 1.5;
            box-sizing: border-box;
            display: inline-block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            white-space: nowrap;
            text-align: left;
            background: white;
            color: black;
            padding: 10px;
            border-radius: .357rem;
            border: 1px solid #ddd;
        }
</style>
@model List<monamedia.Models.Staff>
<main class="main">
    <div class="main_title">
        <p class="main_title-label "><b>Danh sách nhân viên</b></p>
        <div id="clock"></div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="title">
                <div class="title-body">
                    <div class="row_element-button">
                        <div>
                            <a class="btn btn-add" type="button" href="~/Admin/AHome/CreateStaff" title="Thêm">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2" />
                                </svg>
                                <i class="fas fa-plus"></i>
                                Tạo mới nhân viên
                            </a>
                            <a id="deleteSelected" class="btn btn-delete" type="button" title="Xóa" >
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                                    <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5" />
                                </svg> <i class="fas fa-trash-alt"></i> Xóa tất cả
                            </a>
                        </div>
                        <div>
                            <form class="d-flex flex-row align-items-center flex-wrap" action="/Admin/AHome/Index">
                                <label for="search" class="mx-2 my-1">Tìm kiếm</label>
                                <input type="search" class="form-control w-auto" id="search" name="search" placeholder="Tìm kiếm " value="@ViewBag.Search" />
                                <button type="submit" class="btn btn-primary mx-2" style="background-color:blue">Tìm</button>
                            </form>
                        </div>

                    </div>
                    <table class="table table-hover table-bordered js-copytextarea" cellpadding="0" cellspacing="0" border="0"
                           id="sampleTable">
                        <thead>
                            <tr>
                                <th width="10"><input type="checkbox" id="selectAll"></th>
                                <th>ID nhân viên</th>
                                <th>ID tài khoản</th>
                                <th width="150">Họ và tên</th>
                                <th>Ngày sinh</th>
                                <th>Giới tính</th>
                                <th width="300">Địa chỉ</th>
                                <th>SĐT</th>
                                <th>Lương</th>
                                <th width="100">Tính năng</th>
                            </tr>
                        </thead>
                        <tbody>

                            @foreach (var staff in Model)
                            {
                                <tr data-staffID="@staff.staffID" data-accountID="@staff.accountID">
                                    <td><input type="checkbox" class="rowCheckbox"></td>
                                    <td>@staff.staffID</td>
                                    <td>@staff.accountID</td>
                                    <td>@staff.fullName</td>
                                    <td>@staff.birthDate</td>
                                    <td>
                                        @if (staff.gender == true)
                                        {
                                            <text>Nam</text>
                                        }
                                        else
                                        {
                                            <text>Nữ</text>
                                        }
                                    </td>
                                    <td>@staff.address</td>
                                    <td>@staff.phoneNumber</td>
                                    <td>@staff.salary</td>
                                    <td class="table-td-center">
                                        <button class="btn btn-primary btn-sm edit" type="button" title="Sửa" id="show-emp"
                                                data-toggle="modal" data-target="#ModalUP" style="background-color: rgb(251, 226, 197); ">
                                            <a href="~/Admin/AHome/EditStaff?idStaff=@staff.staffID&idAccount=@staff.accountID">

                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                                                    <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
                                                    <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z" />
                                                </svg>
                                                <i class="fas fa-edit"></i>
                                            </a>
                                        </button>
                                        <button  class="btn btn-primary btn-sm trash" type="button" title="Xóa" style="background-color: rgb(247, 195, 194);">
                                            <a  onclick="toggleCheckbox(this)">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                                                    <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5" />
                                                </svg>
                                                <i class="fas fa-trash-alt"></i>
                                            </a>
                                        </button>
                                        <script src="~/Scripts/bootstrap.min.js"></script>
                                        <script src="~/Scripts\jquery-3.5.0.min.js"></script>

                                        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
                                        <script>
                                            function toggleCheckbox(button) {
                                                // Tìm checkbox ở cùng hàng với nút đã nhấn
                                                var checkbox = $(button).closest('tr').find('.rowCheckbox');

                                                // Lấy trạng thái hiện tại của checkbox
                                                var isChecked = checkbox.prop('checked');

                                                // Nếu chưa được chọn, chọn nó; nếu đã được chọn, giữ nguyên
                                                checkbox.prop('checked', true);
                                                var selectedStaffIds = [];
                                                var selectedAccountIDs = [];
                                                $('.rowCheckbox:checked').each(function () {
                                                    var staffID = $(this).closest('tr').data('staffid'); // Lấy staffID của nhân viên từ dòng chứa checkbox được chọn
                                                    selectedStaffIds.push(staffID);
                                                    var accountID = $(this).closest('tr').data('accountid');
                                                    selectedAccountIDs.push(accountID);
                                                });
                                                if (selectedStaffIds.length > 0 && selectedAccountIDs.length > 0) {
                                                    if (confirm('Bạn có chắc chắn muốn xóa nhân viên này không?')) {
                                                        // Nếu người dùng chọn "OK" trong hộp thoại xác nhận, chuyển hướng đến trang DeleteStaff và truyền danh sách ID
                                                        window.location.href = '/Admin/AHome/DeleteStaff?selectedStaffIDs=' + selectedStaffIds.join(',') + '&selectedAccountIDs=' + selectedAccountIDs.join(',');
                                                    }
                                                } else {
                                                    // Nếu không có nhân viên nào được chọn, thông báo cho người dùng
                                                    alert('Vui lòng chọn ít nhất một nhân viên để xóa.');
                                                }
                                            }
                                        </script>

                                    </td>
                                </tr>
                            }

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</main>









